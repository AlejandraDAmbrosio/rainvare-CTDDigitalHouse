<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=MAhTeyfessV5MLQbLlvDgCZNCfnsuot_KmQ_7sU6ZbGmztsI58QYYz8UYOpgcf4ZDbmygMW94tgi81emUdVXIJ1ViTOtXdKgE09I1JZHb-6Bcggz_bpABdto4RqVnX6Rw7N47gKU4bLDB4HvZO6QceTLJTEz3wYjjVApBA1Cox4');ol.lst-kix_3y49c19gr6gx-0{list-style-type:none}ol.lst-kix_3y49c19gr6gx-1{list-style-type:none}ol.lst-kix_3y49c19gr6gx-2{list-style-type:none}ol.lst-kix_3y49c19gr6gx-7{list-style-type:none}ol.lst-kix_3y49c19gr6gx-8{list-style-type:none}.lst-kix_w1gdlxihkuhx-0>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-0}ol.lst-kix_3y49c19gr6gx-3{list-style-type:none}.lst-kix_3y49c19gr6gx-8>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-8}ol.lst-kix_3y49c19gr6gx-4{list-style-type:none}.lst-kix_1xeo2gx0m6u2-1>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-1}ol.lst-kix_3y49c19gr6gx-5{list-style-type:none}ol.lst-kix_up12qhsbxlvy-4.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-4 0}ol.lst-kix_3y49c19gr6gx-6{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-8.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-8 0}.lst-kix_szeyty6ij82g-2>li{counter-increment:lst-ctn-kix_szeyty6ij82g-2}ol.lst-kix_szeyty6ij82g-5.start{counter-reset:lst-ctn-kix_szeyty6ij82g-5 0}ol.lst-kix_w1gdlxihkuhx-3.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-3 0}ul.lst-kix_rhngu9nw9djm-2{list-style-type:none}ul.lst-kix_rhngu9nw9djm-1{list-style-type:none}ul.lst-kix_rhngu9nw9djm-0{list-style-type:none}ul.lst-kix_rhngu9nw9djm-6{list-style-type:none}ul.lst-kix_rhngu9nw9djm-5{list-style-type:none}ul.lst-kix_rhngu9nw9djm-4{list-style-type:none}ul.lst-kix_rhngu9nw9djm-3{list-style-type:none}ul.lst-kix_rhngu9nw9djm-8{list-style-type:none}ul.lst-kix_rhngu9nw9djm-7{list-style-type:none}.lst-kix_1xeo2gx0m6u2-3>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-3}ol.lst-kix_1xeo2gx0m6u2-2.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-2 0}.lst-kix_szeyty6ij82g-4>li{counter-increment:lst-ctn-kix_szeyty6ij82g-4}ol.lst-kix_3y49c19gr6gx-3.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-3 0}.lst-kix_w1gdlxihkuhx-2>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-2}ol.lst-kix_w1gdlxihkuhx-2.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-2 0}.lst-kix_szeyty6ij82g-6>li{counter-increment:lst-ctn-kix_szeyty6ij82g-6}.lst-kix_w1gdlxihkuhx-4>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-4}ol.lst-kix_up12qhsbxlvy-3.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-3 0}.lst-kix_3y49c19gr6gx-6>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-6}ol.lst-kix_3y49c19gr6gx-2.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-2 0}.lst-kix_1xeo2gx0m6u2-5>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-5}ol.lst-kix_3y49c19gr6gx-8.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-8 0}ol.lst-kix_1xeo2gx0m6u2-1.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-1 0}ol.lst-kix_w1gdlxihkuhx-1{list-style-type:none}.lst-kix_szeyty6ij82g-0>li{counter-increment:lst-ctn-kix_szeyty6ij82g-0}ol.lst-kix_w1gdlxihkuhx-2{list-style-type:none}ol.lst-kix_w1gdlxihkuhx-0{list-style-type:none}ol.lst-kix_w1gdlxihkuhx-8.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-8 0}ol.lst-kix_w1gdlxihkuhx-7{list-style-type:none}ol.lst-kix_w1gdlxihkuhx-8{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-7.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-7 0}ol.lst-kix_w1gdlxihkuhx-5{list-style-type:none}ol.lst-kix_w1gdlxihkuhx-6{list-style-type:none}ol.lst-kix_w1gdlxihkuhx-3{list-style-type:none}.lst-kix_up12qhsbxlvy-0>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-0}ol.lst-kix_w1gdlxihkuhx-4{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-0{list-style-type:none}.lst-kix_mbld9ntx3t2j-8>li:before{content:"\0025a0  "}ul.lst-kix_dyqdw3p1nz6x-1{list-style-type:none}.lst-kix_w1gdlxihkuhx-6>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-6}ul.lst-kix_dyqdw3p1nz6x-4{list-style-type:none}.lst-kix_mbld9ntx3t2j-6>li:before{content:"\0025cf  "}ul.lst-kix_dyqdw3p1nz6x-5{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-2{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-3{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-8{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-6{list-style-type:none}ul.lst-kix_dyqdw3p1nz6x-7{list-style-type:none}.lst-kix_up12qhsbxlvy-4>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-4}ol.lst-kix_up12qhsbxlvy-8.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-8 0}ol.lst-kix_3y49c19gr6gx-4.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-4 0}.lst-kix_mbld9ntx3t2j-2>li:before{content:"\0025a0  "}.lst-kix_w1gdlxihkuhx-7>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-7,lower-latin) ". "}ol.lst-kix_w1gdlxihkuhx-1.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-1 0}.lst-kix_mbld9ntx3t2j-4>li:before{content:"\0025cb  "}.lst-kix_up12qhsbxlvy-5>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-5}.lst-kix_w1gdlxihkuhx-7>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-7}ol.lst-kix_3y49c19gr6gx-7.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-7 0}.lst-kix_w1gdlxihkuhx-5>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-5}.lst-kix_3y49c19gr6gx-2>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-2,lower-roman) ") "}.lst-kix_3y49c19gr6gx-6>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-6,decimal) ". "}.lst-kix_3y49c19gr6gx-0>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-0,decimal) ") "}.lst-kix_3y49c19gr6gx-8>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-8,lower-roman) ". "}.lst-kix_mbld9ntx3t2j-0>li:before{content:"\0025a0  "}.lst-kix_szeyty6ij82g-0>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-0,decimal) ") "}.lst-kix_szeyty6ij82g-4>li:before{content:"(" counter(lst-ctn-kix_szeyty6ij82g-4,lower-latin) ") "}ol.lst-kix_szeyty6ij82g-1.start{counter-reset:lst-ctn-kix_szeyty6ij82g-1 0}.lst-kix_3y49c19gr6gx-4>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-4}.lst-kix_szeyty6ij82g-2>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-2,lower-roman) ") "}.lst-kix_3y49c19gr6gx-4>li:before{content:"(" counter(lst-ctn-kix_3y49c19gr6gx-4,lower-latin) ") "}.lst-kix_up12qhsbxlvy-3>li:before{content:"(" counter(lst-ctn-kix_up12qhsbxlvy-3,decimal) ") "}.lst-kix_3y49c19gr6gx-5>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-5}.lst-kix_szeyty6ij82g-5>li{counter-increment:lst-ctn-kix_szeyty6ij82g-5}.lst-kix_szeyty6ij82g-8>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-8,lower-roman) ". "}ol.lst-kix_szeyty6ij82g-5{list-style-type:none}.lst-kix_up12qhsbxlvy-7>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-7,lower-latin) ". "}ol.lst-kix_szeyty6ij82g-6{list-style-type:none}.lst-kix_1xeo2gx0m6u2-4>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-4}ol.lst-kix_szeyty6ij82g-7{list-style-type:none}ol.lst-kix_szeyty6ij82g-8{list-style-type:none}ol.lst-kix_szeyty6ij82g-1{list-style-type:none}.lst-kix_up12qhsbxlvy-1>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-1,lower-latin) ") "}ol.lst-kix_3y49c19gr6gx-5.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-5 0}ol.lst-kix_szeyty6ij82g-2{list-style-type:none}ol.lst-kix_szeyty6ij82g-3{list-style-type:none}.lst-kix_szeyty6ij82g-6>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-6,decimal) ". "}ol.lst-kix_szeyty6ij82g-4{list-style-type:none}ol.lst-kix_up12qhsbxlvy-8{list-style-type:none}ol.lst-kix_up12qhsbxlvy-6{list-style-type:none}ol.lst-kix_szeyty6ij82g-0{list-style-type:none}ol.lst-kix_up12qhsbxlvy-7{list-style-type:none}ol.lst-kix_szeyty6ij82g-0.start{counter-reset:lst-ctn-kix_szeyty6ij82g-0 0}ol.lst-kix_up12qhsbxlvy-0{list-style-type:none}ol.lst-kix_up12qhsbxlvy-1{list-style-type:none}ol.lst-kix_up12qhsbxlvy-4{list-style-type:none}.lst-kix_up12qhsbxlvy-5>li:before{content:"(" counter(lst-ctn-kix_up12qhsbxlvy-5,lower-roman) ") "}ol.lst-kix_up12qhsbxlvy-5{list-style-type:none}ol.lst-kix_up12qhsbxlvy-2{list-style-type:none}ol.lst-kix_up12qhsbxlvy-6.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-6 0}ol.lst-kix_up12qhsbxlvy-3{list-style-type:none}ol.lst-kix_up12qhsbxlvy-5.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-5 0}.lst-kix_rhngu9nw9djm-2>li:before{content:"\0025a0  "}ol.lst-kix_1xeo2gx0m6u2-5.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-5 0}.lst-kix_rhngu9nw9djm-1>li:before{content:"\0025cb  "}.lst-kix_rhngu9nw9djm-3>li:before{content:"\0025cf  "}ol.lst-kix_szeyty6ij82g-8.start{counter-reset:lst-ctn-kix_szeyty6ij82g-8 0}.lst-kix_rhngu9nw9djm-6>li:before{content:"\0025cf  "}.lst-kix_rhngu9nw9djm-7>li:before{content:"\0025cb  "}ol.lst-kix_3y49c19gr6gx-0.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-0 0}.lst-kix_rhngu9nw9djm-0>li:before{content:"\0025cf  "}.lst-kix_rhngu9nw9djm-8>li:before{content:"\0025a0  "}ol.lst-kix_up12qhsbxlvy-1.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-1 0}.lst-kix_dyqdw3p1nz6x-0>li:before{content:"\0027a2  "}.lst-kix_w1gdlxihkuhx-1>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-1}.lst-kix_dyqdw3p1nz6x-3>li:before{content:"\0025cf  "}.lst-kix_dyqdw3p1nz6x-1>li:before{content:"\0025cb  "}.lst-kix_1xeo2gx0m6u2-2>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-2}.lst-kix_1xeo2gx0m6u2-8>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-8,lower-roman) ". "}.lst-kix_dyqdw3p1nz6x-2>li:before{content:"\0025a0  "}.lst-kix_dyqdw3p1nz6x-7>li:before{content:"\0025cb  "}.lst-kix_1xeo2gx0m6u2-6>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-6,decimal) ". "}.lst-kix_szeyty6ij82g-1>li{counter-increment:lst-ctn-kix_szeyty6ij82g-1}.lst-kix_dyqdw3p1nz6x-4>li:before{content:"\0025cb  "}.lst-kix_dyqdw3p1nz6x-8>li:before{content:"\0025a0  "}.lst-kix_1xeo2gx0m6u2-3>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-3,decimal) ". "}.lst-kix_1xeo2gx0m6u2-7>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-7,lower-latin) ". "}ol.lst-kix_3y49c19gr6gx-6.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-6 0}.lst-kix_dyqdw3p1nz6x-5>li:before{content:"\0025a0  "}.lst-kix_1xeo2gx0m6u2-4>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-4,lower-latin) ". "}.lst-kix_dyqdw3p1nz6x-6>li:before{content:"\0025cf  "}.lst-kix_1xeo2gx0m6u2-5>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-5,lower-roman) ". "}.lst-kix_1xeo2gx0m6u2-0>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-0}.lst-kix_3y49c19gr6gx-7>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-7}ol.lst-kix_up12qhsbxlvy-7.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-7 0}.lst-kix_1xeo2gx0m6u2-2>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-2,lower-roman) ". "}.lst-kix_rhngu9nw9djm-5>li:before{content:"\0025a0  "}.lst-kix_rhngu9nw9djm-4>li:before{content:"\0025cb  "}.lst-kix_1xeo2gx0m6u2-0>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-0,decimal) ". "}ol.lst-kix_w1gdlxihkuhx-0.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-0 0}.lst-kix_1xeo2gx0m6u2-1>li:before{content:"" counter(lst-ctn-kix_1xeo2gx0m6u2-1,lower-latin) ". "}.lst-kix_xaqnqsvcbhhz-6>li:before{content:"\0025cf  "}.lst-kix_xaqnqsvcbhhz-5>li:before{content:"\0025a0  "}.lst-kix_xaqnqsvcbhhz-7>li:before{content:"\0025cb  "}ol.lst-kix_1xeo2gx0m6u2-0.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-0 0}ul.lst-kix_mbld9ntx3t2j-1{list-style-type:none}.lst-kix_xaqnqsvcbhhz-2>li:before{content:"\0025a0  "}ul.lst-kix_mbld9ntx3t2j-0{list-style-type:none}.lst-kix_xaqnqsvcbhhz-1>li:before{content:"\0025cb  "}.lst-kix_xaqnqsvcbhhz-0>li:before{content:"\0025cf  "}.lst-kix_xaqnqsvcbhhz-8>li:before{content:"\0025a0  "}ol.lst-kix_szeyty6ij82g-3.start{counter-reset:lst-ctn-kix_szeyty6ij82g-3 0}ol.lst-kix_1xeo2gx0m6u2-0{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-1{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-2{list-style-type:none}.lst-kix_up12qhsbxlvy-3>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-3}ol.lst-kix_1xeo2gx0m6u2-7{list-style-type:none}ol.lst-kix_3y49c19gr6gx-1.start{counter-reset:lst-ctn-kix_3y49c19gr6gx-1 0}ol.lst-kix_1xeo2gx0m6u2-8{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-3{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-4{list-style-type:none}.lst-kix_up12qhsbxlvy-6>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-6}ol.lst-kix_1xeo2gx0m6u2-5{list-style-type:none}ol.lst-kix_szeyty6ij82g-2.start{counter-reset:lst-ctn-kix_szeyty6ij82g-2 0}ol.lst-kix_1xeo2gx0m6u2-6{list-style-type:none}.lst-kix_3y49c19gr6gx-3>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-3}.lst-kix_w1gdlxihkuhx-4>li:before{content:"(" counter(lst-ctn-kix_w1gdlxihkuhx-4,lower-latin) ") "}.lst-kix_w1gdlxihkuhx-5>li:before{content:"(" counter(lst-ctn-kix_w1gdlxihkuhx-5,lower-roman) ") "}.lst-kix_3y49c19gr6gx-0>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-0}ul.lst-kix_mbld9ntx3t2j-8{list-style-type:none}.lst-kix_szeyty6ij82g-3>li{counter-increment:lst-ctn-kix_szeyty6ij82g-3}ol.lst-kix_up12qhsbxlvy-2.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-2 0}ul.lst-kix_mbld9ntx3t2j-7{list-style-type:none}ul.lst-kix_mbld9ntx3t2j-6{list-style-type:none}ul.lst-kix_mbld9ntx3t2j-5{list-style-type:none}ul.lst-kix_mbld9ntx3t2j-4{list-style-type:none}ul.lst-kix_mbld9ntx3t2j-3{list-style-type:none}.lst-kix_w1gdlxihkuhx-3>li:before{content:"(" counter(lst-ctn-kix_w1gdlxihkuhx-3,decimal) ") "}ul.lst-kix_mbld9ntx3t2j-2{list-style-type:none}.lst-kix_w1gdlxihkuhx-2>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-2,lower-roman) ") "}.lst-kix_xaqnqsvcbhhz-3>li:before{content:"\0025cf  "}.lst-kix_xaqnqsvcbhhz-4>li:before{content:"\0025cb  "}.lst-kix_w1gdlxihkuhx-0>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-0,decimal) ") "}.lst-kix_w1gdlxihkuhx-1>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-1,lower-latin) ") "}.lst-kix_szeyty6ij82g-8>li{counter-increment:lst-ctn-kix_szeyty6ij82g-8}.lst-kix_mbld9ntx3t2j-7>li:before{content:"\0025cb  "}.lst-kix_3y49c19gr6gx-2>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-2}.lst-kix_1xeo2gx0m6u2-6>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-6}.lst-kix_w1gdlxihkuhx-6>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-6,decimal) ". "}.lst-kix_mbld9ntx3t2j-1>li:before{content:"\0025cb  "}ol.lst-kix_w1gdlxihkuhx-7.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-7 0}.lst-kix_mbld9ntx3t2j-3>li:before{content:"\0025cf  "}.lst-kix_mbld9ntx3t2j-5>li:before{content:"\0025a0  "}.lst-kix_w1gdlxihkuhx-8>li:before{content:"" counter(lst-ctn-kix_w1gdlxihkuhx-8,lower-roman) ". "}ol.lst-kix_w1gdlxihkuhx-4.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-4 0}.lst-kix_1xeo2gx0m6u2-8>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-8}.lst-kix_3y49c19gr6gx-3>li:before{content:"(" counter(lst-ctn-kix_3y49c19gr6gx-3,decimal) ") "}.lst-kix_3y49c19gr6gx-5>li:before{content:"(" counter(lst-ctn-kix_3y49c19gr6gx-5,lower-roman) ") "}ol.lst-kix_szeyty6ij82g-4.start{counter-reset:lst-ctn-kix_szeyty6ij82g-4 0}.lst-kix_w1gdlxihkuhx-8>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-8}ol.lst-kix_szeyty6ij82g-7.start{counter-reset:lst-ctn-kix_szeyty6ij82g-7 0}ol.lst-kix_up12qhsbxlvy-0.start{counter-reset:lst-ctn-kix_up12qhsbxlvy-0 0}ol.lst-kix_1xeo2gx0m6u2-6.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-6 0}.lst-kix_3y49c19gr6gx-1>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-1,lower-latin) ") "}.lst-kix_3y49c19gr6gx-7>li:before{content:"" counter(lst-ctn-kix_3y49c19gr6gx-7,lower-latin) ". "}.lst-kix_szeyty6ij82g-3>li:before{content:"(" counter(lst-ctn-kix_szeyty6ij82g-3,decimal) ") "}.lst-kix_szeyty6ij82g-1>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-1,lower-latin) ") "}.lst-kix_szeyty6ij82g-5>li:before{content:"(" counter(lst-ctn-kix_szeyty6ij82g-5,lower-roman) ") "}.lst-kix_szeyty6ij82g-7>li{counter-increment:lst-ctn-kix_szeyty6ij82g-7}.lst-kix_3y49c19gr6gx-1>li{counter-increment:lst-ctn-kix_3y49c19gr6gx-1}.lst-kix_up12qhsbxlvy-2>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-2,lower-roman) ") "}.lst-kix_up12qhsbxlvy-4>li:before{content:"(" counter(lst-ctn-kix_up12qhsbxlvy-4,lower-latin) ") "}.lst-kix_szeyty6ij82g-7>li:before{content:"" counter(lst-ctn-kix_szeyty6ij82g-7,lower-latin) ". "}.lst-kix_up12qhsbxlvy-7>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-7}.lst-kix_up12qhsbxlvy-0>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-0,decimal) ") "}.lst-kix_up12qhsbxlvy-8>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-8,lower-roman) ". "}.lst-kix_up12qhsbxlvy-1>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-1}.lst-kix_w1gdlxihkuhx-3>li{counter-increment:lst-ctn-kix_w1gdlxihkuhx-3}ol.lst-kix_w1gdlxihkuhx-6.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-6 0}.lst-kix_up12qhsbxlvy-2>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-2}.lst-kix_up12qhsbxlvy-6>li:before{content:"" counter(lst-ctn-kix_up12qhsbxlvy-6,decimal) ". "}.lst-kix_up12qhsbxlvy-8>li{counter-increment:lst-ctn-kix_up12qhsbxlvy-8}ol.lst-kix_1xeo2gx0m6u2-3.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-3 0}ul.lst-kix_xaqnqsvcbhhz-1{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-0{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-3{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-2{list-style-type:none}ol.lst-kix_1xeo2gx0m6u2-4.start{counter-reset:lst-ctn-kix_1xeo2gx0m6u2-4 0}ol.lst-kix_szeyty6ij82g-6.start{counter-reset:lst-ctn-kix_szeyty6ij82g-6 0}ol.lst-kix_w1gdlxihkuhx-5.start{counter-reset:lst-ctn-kix_w1gdlxihkuhx-5 0}ul.lst-kix_xaqnqsvcbhhz-8{list-style-type:none}.lst-kix_1xeo2gx0m6u2-7>li{counter-increment:lst-ctn-kix_1xeo2gx0m6u2-7}ul.lst-kix_xaqnqsvcbhhz-5{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-4{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-7{list-style-type:none}ul.lst-kix_xaqnqsvcbhhz-6{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c24{padding-top:0pt;padding-bottom:10pt;line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:justify;margin-right:-0.3pt}.c13{margin-left:-56.7pt;padding-top:0pt;padding-bottom:10pt;line-height:1.3;orphans:2;widows:2;text-align:right;height:12pt}.c28{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:25pt;font-family:"Montserrat";font-style:normal}.c30{color:#000000;font-weight:500;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Montserrat";font-style:normal}.c34{color:#333333;font-weight:600;text-decoration:none;vertical-align:baseline;font-size:17pt;font-family:"Montserrat";font-style:normal}.c42{color:#333333;font-weight:600;text-decoration:none;vertical-align:baseline;font-size:15pt;font-family:"Montserrat";font-style:normal}.c3{color:#a9b7c6;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Consolas";font-style:normal}.c12{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c4{color:#000000;font-weight:300;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Archivo";font-style:normal}.c2{background-color:#1e1e1e;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c40{margin-left:-56.7pt;padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:right}.c18{padding-top:14pt;padding-bottom:4pt;line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c45{color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Montserrat";font-style:normal}.c32{padding-top:18pt;padding-bottom:6pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c38{padding-top:16pt;padding-bottom:4pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:10pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c15{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c27{padding-top:14pt;padding-bottom:4pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c25{padding-top:0pt;padding-bottom:6pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c35{padding-top:0pt;padding-bottom:0pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c23{padding-top:10pt;padding-bottom:4pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c44{font-size:17pt;font-family:"Montserrat";color:#666666;font-weight:400}.c20{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c19{background-color:#2b2b2b;color:#a9b7c6;font-weight:300;font-family:"Archivo"}.c16{text-decoration:none;vertical-align:baseline;font-size:12pt;font-style:normal}.c10{font-family:"Consolas";color:#bbb529;font-weight:400}.c21{color:#808080;font-weight:400;font-family:"Consolas"}.c5{font-family:"Consolas";color:#e8bf6a;font-weight:400}.c47{text-decoration:none;vertical-align:baseline;font-style:normal}.c8{font-family:"Consolas";color:#a9b7c6;font-weight:400}.c0{font-family:"Consolas";color:#cc7832;font-weight:400}.c48{background-color:#ffffff;max-width:482.1pt;padding:72pt 56.7pt 72pt 56.7pt}.c29{font-family:"Consolas";color:#6897bb;font-weight:400}.c41{color:#000000;font-weight:400;font-family:"Consolas"}.c11{font-family:"Consolas";color:#ffc66d;font-weight:400}.c46{font-family:"Montserrat";color:#666666;font-weight:400}.c39{font-family:"Montserrat";color:#000000;font-weight:600}.c7{font-family:"Consolas";color:#6a8759;font-weight:400}.c6{color:inherit;text-decoration:inherit}.c31{font-weight:700;font-family:"Archivo"}.c43{font-family:"Montserrat";font-weight:600}.c36{font-size:20pt}.c33{page-break-after:avoid}.c37{text-indent:36pt}.c14{height:12pt}.c22{font-style:italic}.c26{background-color:#2b2b2b}.title{padding-top:0pt;color:#000000;font-weight:600;font-size:30pt;padding-bottom:10pt;font-family:"Montserrat";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#333333;font-weight:300;font-size:18pt;padding-bottom:10pt;font-family:"Montserrat";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:justify}li{color:#000000;font-weight:300;font-size:12pt;font-family:"Archivo"}p{margin:0;color:#000000;font-weight:300;font-size:12pt;font-family:"Archivo"}h1{padding-top:20pt;color:#000000;font-weight:700;font-size:25pt;padding-bottom:6pt;font-family:"Montserrat";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:600;font-size:20pt;padding-bottom:6pt;font-family:"Montserrat";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#333333;font-weight:500;font-size:17pt;padding-bottom:4pt;font-family:"Rubik";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-weight:300;font-size:17pt;padding-bottom:4pt;font-family:"Montserrat";line-height:1.3;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:0pt;color:#000000;font-weight:300;font-size:12pt;padding-bottom:10pt;font-family:"Archivo";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#000000;font-weight:300;font-size:12pt;padding-bottom:4pt;font-family:"Archivo";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}</style></head><body class="c48 doc-content"><div><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c13"><span class="c4"></span></p><p class="c13"><span class="c4"></span></p></div><p class="c24 subtitle" id="h.h9mygdccbaw"><span class="c36">Especializaci&oacute;n en Back End II</span></p><h1 class="c25 c33" id="h.g6ql6jp25pao"><span>Integraci&oacute;n embebida utilizando Spring Cloud Gateway </span></h1><p class="c25"><span>Para este ejemplo crearemos un microservicio al cual el Gateway le enviar&aacute; las peticiones. Este microservicio actuar&aacute; como </span><span class="c31">servidor de recursos</span><span>.</span></p><h3 class="c33 c35" id="h.buil7g4ve951"><span class="c36 c39">Dependencias necesarias</span></h3><p class="c2"><span class="c16 c5">&lt;dependency&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;groupId&gt;</span><span class="c8">org.springframework.boot</span><span class="c16 c5">&lt;/groupId&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;artifactId&gt;</span><span class="c8">spring-boot-starter-oauth2-resource-server</span><span class="c16 c5">&lt;/artifactId&gt;</span></p><p class="c2"><span class="c16 c5">&lt;/dependency&gt;</span></p><p class="c2"><span class="c16 c5">&lt;dependency&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;groupId&gt;</span><span class="c8">org.springframework.boot</span><span class="c16 c5">&lt;/groupId&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;artifactId&gt;</span><span class="c8">spring-boot-starter-web</span><span class="c16 c5">&lt;/artifactId&gt;</span></p><p class="c2"><span class="c5">&lt;/dependency&gt;</span></p><p class="c23"><span>Nuestro microservicio se llamar&aacute; </span><span class="c31">product-service</span><span class="c4">&nbsp;y tendr&aacute; un endpoint que nos permite obtener todos los productos de la base de datos.</span></p><p class="c2"><span class="c16 c10">@RestController</span></p><p class="c2"><span class="c10">@RequestMapping</span><span class="c8">(</span><span class="c7">&quot;/product&quot;</span><span class="c3">)</span></p><p class="c2"><span class="c0">public class</span><span class="c3">&nbsp;ProductController {</span></p><p class="c2 c14"><span class="c3"></span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c10">@GetMapping</span><span class="c8">(</span><span class="c7">&quot;/all&quot;</span><span class="c3">)</span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c0">public </span><span class="c8">List&lt;Map&lt;String</span><span class="c0">,</span><span class="c8">String&gt;&gt; </span><span class="c11">findAll</span><span class="c3">(){</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;</span><span class="c0">return </span><span class="c8">getProducts()</span><span class="c16 c0">;</span></p><p class="c2"><span class="c3">&nbsp;}</span></p><p class="c2"><span class="c8">}</span></p><p class="c1"><span>La clase de configuraci&oacute;n del servidor de recursos nos queda de la siguiente manera:</span></p><p class="c2"><span class="c16 c10">@EnableWebSecurity</span></p><p class="c2"><span class="c10">@EnableGlobalMethodSecurity</span><span class="c8">(prePostEnabled = </span><span class="c0">true</span><span class="c3">)</span></p><p class="c2"><span class="c0">public class</span><span class="c8">&nbsp;OAuth2ResourceServerSecurityConfiguration </span><span class="c0">extends </span><span class="c3">WebSecurityConfigurerAdapter {</span></p><p class="c2 c14"><span class="c3"></span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c16 c10">@Override</span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c0">protected void</span><span class="c8">&nbsp;</span><span class="c11">configure</span><span class="c8">(HttpSecurity http) </span><span class="c0">throws </span><span class="c3">Exception {</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;http.oauth2ResourceServer().jwt().jwtAuthenticationConverter(</span><span class="c0">new</span><span class="c8">&nbsp;KeyCloakJwtAuthenticationConverter())</span><span class="c16 c0">;</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;http.authorizeRequests().anyRequest().authenticated()</span><span class="c16 c0">;</span></p><p class="c2"><span class="c3">&nbsp;}</span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c16 c10">@Bean</span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c0">public </span><span class="c8">JwtDecoder </span><span class="c11">jwtDecoder</span><span class="c3">() {</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;</span><span class="c0">return </span><span class="c8">NimbusJwtDecoder.</span><span class="c8 c22">withJwkSetUri</span><span class="c8">(</span><span class="c7">&quot;http://localhost:8082/realms/dh/protocol/openid-connect/certs&quot;</span><span class="c8">).build()</span><span class="c16 c0">;</span></p><p class="c2"><span class="c3">&nbsp;}</span></p><p class="c2"><span class="c8">}</span></p><p class="c17 c14"><span class="c16 c10 c26"></span></p><p class="c1"><span>Estamos limitando el consumo de la API solo a usuarios autenticados. A su vez, estamos utilizando un </span><span class="c31">authentication converter</span><span class="c4">&nbsp;para obtener datos del token.</span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c32"><span class="c36 c43">Configuraci&oacute;n de Keycloak</span></p><p class="c1"><span>Vamos a crear un cliente llamado </span><span class="c31">api-gateway</span><span class="c4">&nbsp;con las siguientes caracter&iacute;sticas:</span></p><p class="c15"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 588.65px; height: 316.81px;"><img alt="" src="https://lh3.googleusercontent.com/l7oD7frynysgQ79dlSy_1bHQTe7nQxT_dKZMO0pBgn2L-2hFVaUIdJirP5n6H9NKGq7G-UiRCP2HQqXJclkhS5g81hXpeS1ftkXB2QNud665YwlMxNlmmLoFtz6eFvq_6uUoXo-N4mEyzbkSzRY2NMs" style="width: 588.65px; height: 316.81px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span>La URL de redirecci&oacute;n es </span><span class="c20"><a class="c6" href="https://www.google.com/url?q=http://localhost:9090/login/oauth2/code/keycloak%25E2%2580%259D&amp;sa=D&amp;source=editors&amp;ust=1677538611597330&amp;usg=AOvVaw3JGOuSAdloAEdNorMOGsRB">http://localhost:9090/login/oauth2/code/keycloak</a></span><span>.</span><span>&nbsp;En esa direcci&oacute;n se ejecutar&aacute; nuestro gateway.</span></p><p class="c38"><span class="c34">API gateway</span></p><h3 class="c18" id="h.x8exp646kyq"><span class="c46">Dependencias</span></h3><p class="c2"><span class="c16 c5">&lt;dependency&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;groupId&gt;</span><span class="c8">org.springframework.boot</span><span class="c16 c5">&lt;/groupId&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;artifactId&gt;</span><span class="c8">spring-boot-starter-oauth2-client</span><span class="c16 c5">&lt;/artifactId&gt;</span></p><p class="c2"><span class="c16 c5">&lt;/dependency&gt;</span></p><p class="c2"><span class="c16 c5">&lt;dependency&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;groupId&gt;</span><span class="c8">org.springframework.cloud</span><span class="c16 c5">&lt;/groupId&gt;</span></p><p class="c2"><span class="c5">&nbsp; &nbsp;&lt;artifactId&gt;</span><span class="c8">spring-cloud-starter-gateway</span><span class="c16 c5">&lt;/artifactId&gt;</span></p><p class="c2"><span class="c16 c5">&lt;/dependency&gt;</span></p><p class="c1"><span>Configuraci&oacute;n</span><span>&nbsp;en el archivo </span><span class="c31">application.yml</span><span>:</span></p><p class="c2"><span class="c0">spring</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp;</span><span class="c0">security</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;</span><span class="c0">oauth2</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">client</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">provider</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">api-gateway</span><span class="c3">:</span></p><p class="c2"><span class="c8">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0">issuer-uri</span><span class="c8">: http://localhost:8082/realms/dh</span></p><p class="c17 c14"><span class="c16 c0 c26"></span></p><p class="c1"><span>Debemos </span><span>tener en cuenta que </span><span class="c31">api-gateway</span><span class="c4">&nbsp;es el nombre del cliente que creamos en Keycloak. En caso de tener otro cliente, debemos cambiar el nombre aqu&iacute; en la configuraci&oacute;n.</span></p><p class="c27"><span class="c44">Configuraci&oacute;n para registrar el API gateway como cliente</span></p><p class="c2"><span class="c0">registration</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp;keycloak-spring-gateway-client</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;provider</span><span class="c3">: keycloak</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;client-id</span><span class="c3">: api-gateway</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;client-secret</span><span class="c3">: your-client-secret</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;authorization-grant-type</span><span class="c3">: authorization_code</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;redirect-uri</span><span class="c8">:</span><span class="c0">&nbsp;</span><span class="c16 c7">&#39;http://localhost:9090/login/oauth2/code/keycloak&#39;</span></p><p class="c14 c17"><span class="c16 c0 c26"></span></p><p class="c1"><span>Aqu&iacute; estamos seteando el </span><span class="c31">secret </span><span>que obtenemos del tab </span><span class="c31">Credentials</span><span>&nbsp;dentro del cliente </span><span class="c31">api-gateway</span><span class="c4">&nbsp;e indicando que queremos que los usuarios sean autenticados utilizando el c&oacute;digo de autorizaci&oacute;n.</span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1"><span>El archivo </span><span class="c31">application.yml</span><span>&nbsp;entonces nos queda:</span></p><p class="c2"><span class="c0">spring</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp;security</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;oauth2</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provider</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;api-gateway-service</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issuer-uri</span><span class="c3">: http://localhost:8082/realms/dh</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;registration</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;api-gateway-service</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provider</span><span class="c3">: api-gateway-service</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client-id</span><span class="c3">: api-gateway</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client-secret</span><span class="c3">: xdOXeXgwYZWyieev2B2b036zudNLEwAJ</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authorization-grant-type</span><span class="c3">: authorization_code</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect-uri</span><span class="c8">:</span><span class="c0">&nbsp;</span><span class="c16 c7">&#39;http://localhost:9090/login/oauth2/code/keycloak&#39;</span></p><p class="c2"><span class="c0">&nbsp;cloud</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;gateway</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default-filters</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">- TokenRelay</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;routes</span><span class="c3">:</span></p><p class="c2 c37"><span class="c8">-</span><span class="c0">&nbsp;id</span><span class="c3">: product-service</span></p><p class="c2 c37"><span class="c0">&nbsp; uri</span><span class="c3">: http://localhost:8083</span></p><p class="c2 c37"><span class="c0">&nbsp; predicates</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c3">- Path=/product/**</span></p><p class="c2"><span class="c0">server</span><span class="c3">:</span></p><p class="c2"><span class="c0">&nbsp;port</span><span class="c8">:</span><span class="c0">&nbsp;</span><span class="c29">9090</span></p><p class="c27"><span class="c44 c47">Limitando el acceso a usuarios autenticados</span></p><p class="c1"><span>Para restringir el acceso a usuarios autenticados desde el gateway, el proceso es similar a la configuraci&oacute;n de </span><span class="c31">product-service</span><span>, pero en este caso utilizamos un </span><span class="c31">filtro</span><span>.</span></p><p class="c2"><span class="c16 c10">@Configuration</span></p><p class="c2"><span class="c0">public class </span><span class="c3">SecurityConfiguration {</span></p><p class="c2 c14"><span class="c16 c0"></span></p><p class="c2"><span class="c0">&nbsp;</span><span class="c16 c10">@Bean</span></p><p class="c2"><span class="c0">&nbsp;public </span><span class="c8">SecurityWebFilterChain</span><span class="c0">&nbsp;</span><span class="c11">springSecurityFilterChain</span><span class="c0">&nbsp;</span><span class="c3">(ServerHttpSecurity http) {</span></p><p class="c2 c14"><span class="c16 c0"></span></p><p class="c2"><span class="c3">&nbsp; &nbsp;http</span></p><p class="c2"><span class="c3">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.authorizeExchange()</span></p><p class="c2"><span class="c3">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.anyExchange()</span></p><p class="c2"><span class="c3">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.authenticated()</span></p><p class="c2"><span class="c3">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.and()</span></p><p class="c2"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.oauth2Login()</span><span class="c0">; </span><span class="c16 c21">// to redirect to oauth2 login page.</span></p><p class="c2 c14"><span class="c0 c16"></span></p><p class="c2"><span class="c0">&nbsp; &nbsp;return </span><span class="c8">http.build()</span><span class="c16 c0">;</span></p><p class="c2"><span class="c3">&nbsp;}</span></p><p class="c2"><span class="c3">}</span></p><p class="c17 c14"><span class="c16 c10 c26"></span></p><p class="c1"><span class="c4">Como podemos ver, el c&oacute;digo de configuraci&oacute;n es muy similar. La diferencia m&aacute;s notoria es que estamos agregando una redirecci&oacute;n para el login de Keycloak.</span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1 c14"><span class="c4"></span></p><p class="c1"><span>Listo, ya tenemos todo configurado. Si ejecutamos ambos servicios y nos dirigimos a </span><span class="c20"><a class="c6" href="https://www.google.com/url?q=http://localhost:9090/product/all&amp;sa=D&amp;source=editors&amp;ust=1677538611612019&amp;usg=AOvVaw2-HVwFMoaet8La8H2M386j">http://localhost:9090/product/all</a></span><span>,</span><span>&nbsp;al no estar autenticados, seremos redirigidos a la pantalla con el login.</span></p><p class="c15"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 459.65px; height: 332.21px;"><img alt="" src="https://lh6.googleusercontent.com/84edjXbYDPljsdzswm7_RXcUxxYd4eXImww7X48SxP5vmHj7rEyHJXEvLPWxh8YxAMR2vY_9gY1I20dVT8Q8BmBgDgyPtF_cdQaWpN5Cs_FmY_gbpP3tgQdcMELHb3KUC0WcqZKCRQMkqmbO2cLRpaw" style="width: 459.65px; height: 332.21px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c4">Despu&eacute;s de iniciar sesi&oacute;n, podemos ver la respuesta del microservicio:</span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 449.00px; height: 121.00px;"><img alt="" src="https://lh5.googleusercontent.com/5DZO7V4IxpaeYzBwmRcbU_bSOJ67chW1n7FXstpuwJuD7PlvLpkFMF9tN1FAxDiw_Td2AXkQzgOJg0V2AxOvHqPNzj60pymIMakqItH3ZGHS9rULkZwy7mDolT48RTjqVTRBiql-tsW_kljjjxPJOWg" style="width: 449.00px; height: 121.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9 c14"><span class="c12"></span></p><p class="c9 c14"><span class="c12"></span></p><div><p class="c40"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 29.33px; height: 13.33px;"><img alt="" src="https://docs.google.com/drawings/d/snIQjOz0W2c5Jzlvos2MeQA/image?parent=1ChYOc62nPcTx7SE5PV-FSK7eRjfVH1tbn341vWMy1Bw&amp;rev=1&amp;drawingRevisionAccessToken=0jMSzYTFnclaHw&amp;h=13&amp;w=29&amp;ac=1" style="width: 29.33px; height: 13.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c13"><span class="c30"></span></p></div></body></html>